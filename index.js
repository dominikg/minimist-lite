var z=(n,r)=>()=>(r||n((r={exports:{}}).exports,r),r.exports);var F=z((D,x)=>{x.exports=B;B.flatten=B;B.unflatten=$;function K(n){return n&&n.constructor&&typeof n.constructor.isBuffer=="function"&&n.constructor.isBuffer(n)}function S(n){return n}function B(n,r){r=r||{};let w=r.delimiter||".",p=r.maxDepth,e=r.transformKey||S,b={};function E(a,j,_){_=_||1,Object.keys(a).forEach(function(f){let c=a[f],l=r.safe&&Array.isArray(c),s=Object.prototype.toString.call(c),t=K(c),v=s==="[object Object]"||s==="[object Array]",o=j?j+w+e(f):e(f);if(!l&&!t&&v&&Object.keys(c).length&&(!r.maxDepth||_<p))return E(c,o,_+1);b[o]=c})}return E(n),b}function $(n,r){r=r||{};let w=r.delimiter||".",p=r.overwrite||!1,e=r.transformKey||S,b={};if(K(n)||Object.prototype.toString.call(n)!=="[object Object]")return n;function a(f){let c=Number(f);return isNaN(c)||f.indexOf(".")!==-1||r.object?f:c}function j(f,c,l){return Object.keys(l).reduce(function(s,t){return s[f+w+t]=l[t],s},c)}function _(f){let c=Object.prototype.toString.call(f),l=c==="[object Array]",s=c==="[object Object]";if(f){if(l)return!f.length;if(s)return!Object.keys(f).length}else return!0}return n=Object.keys(n).reduce(function(f,c){let l=Object.prototype.toString.call(n[c]);return!(l==="[object Object]"||l==="[object Array]")||_(n[c])?(f[c]=n[c],f):j(c,f,B(n[c],r))},{}),Object.keys(n).forEach(function(f){let c=f.split(w).map(e),l=a(c.shift()),s=a(c[0]),t=b;for(;s!==void 0;){if(l==="__proto__")return;let v=Object.prototype.toString.call(t[l]),o=v==="[object Object]"||v==="[object Array]";if(!p&&!o&&typeof t[l]!="undefined")return;(p&&!o||!p&&t[l]==null)&&(t[l]=typeof s=="number"&&!r.object?[]:{}),t=t[l],c.length>0&&(l=a(c.shift()),s=a(c[0]))}t[l]=$(n[f],r)}),b}});module.exports=function(n,r){var w=F().unflatten,p=F();r||(r={});var e={bools:{},strings:{},array:{},aliases:{},unknownFn:null};typeof r.unknown=="function"&&(e.unknownFn=r.unknown),typeof r.boolean=="boolean"&&r.boolean?e.allBools=!0:[].concat(r.boolean).filter(Boolean).forEach(function(i){e.bools[i]=!0});var b=e.aliases;Object.keys(r.alias||{}).forEach(function(i){b[i]=[].concat(r.alias[i]),b[i].forEach(function(u){b[u]=[i].concat(b[i].filter(function(O){return u!==O}))})}),[].concat(r.string).filter(Boolean).forEach(function(i){e.strings[i]=!0,e.aliases[i]&&(e.strings[e.aliases[i]]=!0)}),[].concat(r.array).filter(Boolean).forEach(function(i){e.array[i]=!0,e.aliases[i]&&(e.array[e.aliases[i]]=!0)});var E=p(r.default||{}),a={_:[]};Object.keys(e.bools).forEach(function(i){f(i,E[i]===void 0?!1:E[i])});var j=[];!r.stopEarly&&n.indexOf("--")!==-1&&(j=n.slice(n.indexOf("--")+1),n=n.slice(0,n.indexOf("--")));function _(i,u){return e.allBools&&/^--[^=]+$/.test(u)||e.strings[i]||e.bools[i]||e.array[i]||e.aliases[i]}function f(i,u,O){if(!(O&&e.unknownFn&&!_(i,O)&&e.unknownFn(O)===!1)){var y=!e.strings[i]&&I(u)?Number(u):u;c(a,i,y),(b[i]||[]).forEach(function(q){c(a,q,y)})}}function c(i,u,O){var y=i;u!=="__proto__"&&(y[u]===void 0?y[u]=e.array[u]?[O]:O:e.bools[u]||typeof y[u]=="boolean"?y[u]=O:Array.isArray(y[u])?y[u].push(O):y[u]=[y[u],O])}function l(i){return b[i].some(function(u){return e.bools[u]})}for(var s=0;s<n.length;s++){var t=n[s];if(/^--.+=/.test(t)){var v=t.match(/^--([^=]+)=([\s\S]*)$/),o=v[1],A=v[2];e.bools[o]&&(A=A!=="false"),f(o,A,t)}else if(/^--.+:/.test(t)){var v=t.match(/^--([^=]+):([\s\S]*)$/),o=v[1],A=v[2];e.array[o]===void 0&&(e.array[o]=!0,e.aliases[o]&&(e.array[e.aliases[o]]=!0)),e.bools[o]&&(A=A!=="false"),f(o,A,t)}else if(/^--no-.+/.test(t)){var o=t.match(/^--no-(.+)/)[1];f(o,!1,t)}else if(/^--.+/.test(t)){var o=t.match(/^--(.+)/)[1],h=n[s+1];h!==void 0&&!/^-/.test(h)&&!e.bools[o]&&!e.allBools&&(b[o]?!l(o):!0)?(f(o,h,t),s++):/^(true|false)$/.test(h)?(f(o,h==="true",t),s++):f(o,e.strings[o]?"":!0,t)}else if(/^-[^-]+/.test(t)){for(var m=t.slice(1,-1).split(""),N=!1,d=0;d<m.length;d++){var h=t.slice(d+2);if(h==="-"){f(m[d],h,t);continue}if(/[A-Za-z]/.test(m[d])&&/=/.test(h)){f(m[d],h.split("=")[1],t),N=!0;break}if(/[A-Za-z]/.test(m[d])&&/-?\d+(\.\d*)?(e-?\d+)?$/.test(h)){f(m[d],h,t),N=!0;break}if(m[d+1]&&m[d+1].match(/\W/)){f(m[d],t.slice(d+2),t),N=!0;break}else f(m[d],e.strings[m[d]]?"":!0,t)}var o=t.slice(-1)[0];!N&&o!=="-"&&(n[s+1]&&!/^(-|--)[^-]/.test(n[s+1])&&!e.bools[o]&&(b[o]?!l(o):!0)?(f(o,n[s+1],t),s++):n[s+1]&&/^(true|false)$/.test(n[s+1])?(f(o,n[s+1]==="true",t),s++):f(o,e.strings[o]?"":!0,t))}else if((!e.unknownFn||e.unknownFn(t)!==!1)&&a._.push(e.strings._||!I(t)?t:Number(t)),r.stopEarly){a._.push.apply(a._,n.slice(s+1));break}}return Object.keys(E).forEach(function(i){i in a||(c(a,i,E[i]),(b[i]||[]).forEach(function(u){c(a,u,E[i])}))}),r["--"]?(a["--"]=new Array,j.forEach(function(i){a["--"].push(i)})):j.forEach(function(i){a._.push(i)}),w(a)};function I(n){if(typeof n=="number")return!0;if(/^0x[0-9a-f]+$/i.test(n))try{return Number(n)<=Number.MAX_SAFE_INTEGER}catch{return!1}return/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(n)}
